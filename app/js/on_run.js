function OnRun($rootScope, $stateParams, AppSettings, $uibModal, $log, $cookies, $http, $state) {  'ngInject';  $rootScope.$state = $state;  $rootScope.$stateParams = $stateParams;  $rootScope.pageRendered = false;  $rootScope.apiUrl = AppSettings.apiUrl;  $rootScope.imageUrl = AppSettings.imageUrl;  $rootScope.rootUserEmail = AppSettings.rootUserEmail;  //$rootScope.rootUserId = AppSettings.rootUserId;  $rootScope.userLoggedIn = false;  if ($cookies.get('auth_key')) {    $rootScope.authToken = $cookies.get('auth_key');    $rootScope.userLoggedIn = true;  }  if ($rootScope.userLoggedIn) {    // Get logged in user name    $http.get($rootScope.apiUrl + 'users/one?_auth_key=' + $rootScope.authToken)      .then(function successCallback(response) {        $rootScope.userProfile = response.data.data.profile;        $rootScope.userId = response.data.data.id;        $rootScope.pageRendered = true;      }, function errorCallback(response) {});  } else {    $rootScope.pageRendered = true;  }  $rootScope.SignUpModal = function(size) {    var modalInstance = $uibModal.open({      templateUrl: 'modals/signup.html',      controller: ['$scope', '$uibModalInstance', '$http', '$rootScope', SignUpCtrl],      size: size    });  };  $rootScope.LogInModal = function(size) {    var modalInstance = $uibModal.open({      templateUrl: 'modals/login.html',      controller: ['$scope', '$uibModalInstance', '$http', '$rootScope', '$cookies', '$log', '$state', LogInCtrl],      size: size    });  };  function SignUpCtrl($scope, $uibModalInstance, $http, $rootScope) {    // Sign up user    $scope.SignUpForm = function() {      $scope.isSubmitting = true;      $scope.formError = false;      $scope.formErrorData = [""];      var signUpData = {        'firstName': $scope.firstname,        'lastName': $scope.lastname,        'email': $scope.email,        'password': $scope.password      };      $http.post($rootScope.apiUrl + 'users/create', signUpData)        .then(function successCallback(response) {          if (response.data.errors[0]) {            // Log the response            $log.error('errors', response);            $scope.isSubmitting = false;            $scope.formError = true;            $scope.formErrorData = response.data.errors;          }          if (response.data.result == 1) {            $uibModalInstance.close();            $scope.isSubmitting = false;            $rootScope.alert = true;            $rootScope.alertMessage = 'Thank you for signing up, please verify your email address';            $rootScope.alertResponse = 'alert-success';          }        }, function errorCallback(response) {          // Log the response          $log.error('error', response);          $scope.isSubmitting = false;          $scope.formError = true;          $scope.formErrorData = ['Sorry there seems to be something wrong on our end, please try again...'];        });    };    $scope.LoginSwitch = function() {      $uibModalInstance.close();      setTimeout(function() {        $rootScope.LogInModal('sm');      }, 200);    };  }  function LogInCtrl($scope, $uibModalInstance, $http, $rootScope, $cookies, $log, $state) {    // Log in user    $scope.LogInForm = function() {      $scope.isSubmitting = true;      $scope.formError = false;      $scope.formErrorData = [""];      var LogInData = {        'email': $scope.email,        'password': $scope.password      };      $http.post($rootScope.apiUrl + 'users/login', LogInData)        .then(function successCallback(response) {          if (response.data.errors[0]) {            // Log the response            $log.error('errors', response);            $scope.isSubmitting = false;            $scope.formError = true;            $scope.formErrorData = response.data.errors;          }          if (response.data.result == 1) {            var authKey = response.data.data.auth_key;            $log.info(authKey);            $rootScope.userLoggedIn = true;            $cookies.put('auth_key', authKey);            $rootScope.authToken = $cookies.get('auth_key');            // Get logged in user name            $http.get($rootScope.apiUrl + 'users/one?_auth_key=' + $rootScope.authToken)              .then(function successCallback(response) {                $rootScope.userProfile = response.data.data.profile;                $uibModalInstance.close();                $scope.isSubmitting = false;                $state.go('user.dashboard');                //TODO: if user.dashboard reload              }, function errorCallback(response) {                $rootScope.alert = true;                $rootScope.alertMessage = 'Sorry there seems to be something wrong with getting your user details';                $rootScope.alertResponse = 'alert-danger';                $uibModalInstance.close();                $scope.isSubmitting = false;                $state.go('Home');                //TODO: if Home reload              });          }        }, function errorCallback(response) {          // Log the response          $log.error('error', response);          $scope.isSubmitting = false;          $scope.formError = true;          $scope.formErrorData = ['Sorry there seems to be something wrong on our end, please try again...'];        });    };    $scope.SignUpSwitch = function() {      $uibModalInstance.close();      setTimeout(function() {        $rootScope.SignUpModal('sm');      }, 200);    };  }  // Log out  $rootScope.logOut = function() {    $cookies.remove('auth_key');    $rootScope.authToken = "";    $rootScope.userLoggedIn = false;    $rootScope.userProfile = "";    $state.reload();  }}export default OnRun;