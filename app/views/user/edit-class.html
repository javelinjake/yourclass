<div class="container">

  <div ng-include="'user/navs/user-nav.html'"></div>

  <uib-tabset active="userEditClass.tabIndex" vertical="true" type="pills" class="panel-white p4 clearfix account-wrapper">

    <uib-tab index="0">
      <uib-tab-heading>
        <div class="strong">The Basics</div>
        <div>Name, category, price and size</div>
      </uib-tab-heading>

      <!-- The Basics -->
      <div class="panel-form">

        <div class="account-heading pb4 mb4">
          <h2 class="heading-font text-center uppercase m0">Edit your class</h2>
          <p class="text-center font-big m0">Edit your class description</p>
        </div>

          <form name="userEditClass.addClassForm" ng-submit="userEditClass.editClassBasics()" class="form-horizontal">
            <fieldset>

              <div class="form-group">
                <label class="control-label">Name</label>
                <div>
                  <input ng-model="userEditClass.classData.title" type="text" name="title" class="form-control form-full" placeholder="Class name" required/>
                </div>
              </div>

              <div class="form-group">
                <label class="control-label">Category</label>
                <div>
                  <select ng-model="userEditClass.classData.category" ng-change="userEditClass.classCategory(userEditClass.classData.category.id)" class="form-control form-full" ng-options="category as category.title for category in userEditClass.categories track by category.id" required>
                    <option value="">-- Select Category --</option>
                  </select>
                </div>
              </div>

              <div ng-repeat="category in userEditClass.categories" ng-if="category.id == userEditClass.subCategory && category.subcats[0]" class="form-group">
                  <label class="control-label">Sub category</label>
                  <div>
                    <select ng-model="userEditClass.classData.subcategory" class="form-control form-full" ng-options="subCategory as subCategory.title for subCategory in category.subcats track by subCategory.id">
                      <option value="">-- Select Sub Category --</option>
                    </select>
                  </div>
              </div>

              <div class="form-group">
                <label class="control-label">Price</label>
                <div class="tooltip-wrapper">
                  <div class="tooltip-button question-button">
                    <span>?</span>
                  </div>
                  <span class="tooltip top question">
                    <div class="tooltip-inner">
                      Per person
                    </div>
                  </span>
                </div>

                <div class="custom-radio-wrapper">
                  <div class="col-md-3">
                    <label class="btn btn-default btn-block" ng-model="userEditClass.classData.price" uib-btn-radio="'0.00'" ng-click="userEditClass.customPrice = false">Free</label>
                  </div>
                  <div class="col-md-2">
                    <label class="btn btn-default btn-block" ng-model="userEditClass.classData.price" uib-btn-radio="'10.00'" ng-click="userEditClass.customPrice = false">$10</label>
                  </div>
                  <div class="col-md-2">
                    <label class="btn btn-default btn-block" ng-model="userEditClass.classData.price" uib-btn-radio="'20.00'" ng-click="userEditClass.customPrice = false">$20</label>
                  </div>
                  <div class="col-md-2">
                    <label class="btn btn-default btn-block" ng-model="userEditClass.classData.price" uib-btn-radio="'30.00'" ng-click="userEditClass.customPrice = false">$30</label>
                  </div>
                  <div class="col-md-3">
                    <label class="btn btn-default btn-block" ng-model="userEditClass.classData.price" uib-btn-radio="'custom'" ng-click="userEditClass.customPrice = true; userEditClass.focusPrice()" ng-if="!userEditClass.customPrice">Custom</label>
                  </div>
                  <div class="col-md-3">
                    <input ng-model="userEditClass.priceInput" type="number" min="0" class="form-control form-full price-input" ng-if="userEditClass.customPrice" />
                  </div>
                </div>

              </div>

              <div class="form-group">

                <label class="control-label">Size</label>
                <div class="tooltip-wrapper">
                  <div class="tooltip-button question-button">
                    <span>?</span>
                  </div>
                  <span class="tooltip top question">
                    <div class="tooltip-inner">
                      Max size
                    </div>
                  </span>
                </div>

                <div class="custom-radio-wrapper">
                  <div class="col-md-1">
                    <label class="btn btn-default btn-block" ng-model="userEditClass.classData.size" uib-btn-radio="'1'" ng-click="userEditClass.customSize = false">1</label>
                  </div>
                  <div class="col-md-1">
                    <label class="btn btn-default btn-block" ng-model="userEditClass.classData.size" uib-btn-radio="'2'" ng-click="userEditClass.customSize = false">2</label>
                  </div>
                  <div class="col-md-1">
                    <label class="btn btn-default btn-block" ng-model="userEditClass.classData.size" uib-btn-radio="'5'" ng-click="userEditClass.customSize = false">5</label>
                  </div>
                  <div class="col-md-3">
                    <label class="btn btn-default btn-block" ng-model="userEditClass.classData.size" uib-btn-radio="'10'" ng-click="userEditClass.customSize = false">10</label>
                  </div>
                  <div class="col-md-3">
                    <label class="btn btn-default btn-block" ng-model="userEditClass.classData.size" uib-btn-radio="'20'" ng-click="userEditClass.customSize = false">20</label>
                  </div>
                  <div class="col-md-3">
                    <label class="btn btn-default btn-block" ng-model="userEditClass.classData.size" uib-btn-radio="'custom'" ng-click="userEditClass.customSize = true; userEditClass.focusSize()" ng-if="!userEditClass.customSize">Custom</label>
                  </div>
                  <div class="col-md-3">
                    <input ng-model="userEditClass.sizeInput" type="number" min="1" class="form-control form-full size-input" ng-if="userEditClass.customSize" />
                  </div>
                </div>

              </div>

              <div class="form-group">
                <button type="submit" class="btn btn-primary btn-block">Update</button>
              </div>

            </fieldset>
          </form>

      </div>

    </uib-tab>





    <uib-tab index="1" heading="Vertical 2">
      <uib-tab-heading>
        <div class="strong">The Details</div>
        <div>Brief, description and photos</div>
      </uib-tab-heading>

      <!-- The Details -->
      <div class="panel-form">

        <div class="account-heading pb4 mb4">
          <h2 class="heading-font text-center uppercase m0">
            <span ng-if="fromAddClass">
              Great you have created <strong>{{ userEditClass.classData.title }}</strong> lets add some more details
            </span>
            <span ng-if="!fromAddClass">
              Edit your class details
            </span>
          </h2>
          <p class="text-center font-big m0">
            <span ng-if="fromAddClass">
              You can easily edit the basic details using the navigation on the left
            </span>
            <span ng-if="!fromAddClass">
              Now lets add in some more detail about your class. The more information you add the more successful your class will be, so get creative with your descriptions!
            </span>
          </p>
        </div>

        <form name="editClassDetailsForm" ng-submit="userEditClass.editClassDetails()" class="form-horizontal">
          <fieldset>

            <div class="form-group">
              <label class="control-label">Short description</label>
              <div>
                <textarea ng-model="userEditClass.classData.brief" class="form-control form-full" rows="2" placeholder="Short description" required></textarea>
              </div>
            </div>

            <div class="form-group">
              <label class="control-label">Main description</label>
              <div>
                <textarea ng-model="userEditClass.classData.description" class="form-control form-full" rows="4" placeholder="Main description"></textarea>
              </div>
            </div>

            <div class="form-group">
              <label class="control-label">Cover photo</label>
              <div>
                Will be going here
              </div>
            </div>


            <div class="form-group">
              <label class="control-label">Other photos</label>

              <ul class="clearfix list-unstyled photo-gallery">
                <li ng-repeat="photo in userEditClass.classData.photos">
                  <img src="{{imageUrl}}{{photo.src}}" alt="" class="img-responsive">
                  <span ng-click="userEditClass.imageCover(photo.id)" class="icon icon-favorite"></span>
                  <span ng-click="userEditClass.imageRemove(photo.id)" class="icon icon-bin"></span>
                </li>
              </ul>

              <form name="myForm">
                <fieldset>
                  <legend>Upload on form submit</legend>
                  <br>Photo:
                  <input type="file" ngf-select ng-model="picFile" multiple accept="image/*" ngf-max-height="5000" ngf-max-width="5000" ngf-max-size="5MB" ngf-resize="{width: 1000, height: 1000, quality: .7}" ngf-resize-if="$width > 1000 || $height > 1000">
                  <i ng-show="myForm.file.$error.required">*required</i><br>
                  <i ng-show="myForm.file.$error.maxSize">File too large
                      {{errorFile.size / 1000000|number:1}}MB: max 2M</i>

                  <div ng-repeat="pic in picFile">
                    <div class="thumbnail col-xs-6">
                      <img ngf-thumbnail="pic">
                    </div>
                  </div>

                  <button class="btn btn-primary btn-block" ng-disabled="myForm.$invalid"
                          ng-click="userEditClass.uploadFiles(picFile)">Submit</button>

                  <span class="progress">
                    Progress:
                    <div style="width:{{picFile.progress}}%"
                        ng-bind="picFile.progress + '%'"></div>
                  </span>
                  <span ng-show="picFile.result">Upload Successful</span>
                  <span class="err" ng-show="userEditClass.errorMsg">{{userEditClass.errorMsg}}</span>
                </fieldset>

              </form>

            </div>

            <div class="form-group">
              <button type="submit" class="btn btn-primary btn-block">Update</button>
            </div>

          </fieldset>

        </form>

      </div>

    </uib-tab>





    <uib-tab index="2" heading="Vertical 3">
      <uib-tab-heading>
        <div class="strong">The Location</div>
        <div>Venue and facilities</div>
      </uib-tab-heading>

      <!-- The Location -->


    </uib-tab>





    <uib-tab index="3" heading="Vertical 4">
      <uib-tab-heading>
        <div class="strong">The Dates</div>
        <div>Calendar and times</div>
      </uib-tab-heading>

      <!-- The Dates -->
      <div class="panel panel-form block">

        <div class="panel-heading">

          <h2 class="panel-title text-center">
            <span>
              Add your class dates and times
            </span>
          </h2>
          <p class="text-center">
            <span>
              Simply add your date and time and click save
            </span>
          </p>

        </div>

        <div class="panel-body">
          <form name="editClassDetailsForm" ng-submit="userEditClass.editClassDates()" class="form-horizontal">
            <fieldset>

              <div class="form-group">
                <label class="control-label">Date</label>
                <div>
                  <div uib-datepicker ng-model="userEditClass.classDate" datepicker-options="{showWeeks: false}"></div>
                </div>
              </div>

              <div class="form-group">
                <label class="control-label">Time</label>
                <div>
                  <div uib-timepicker ng-model="userEditClass.classTime" hour-step="userEditClass.hstep" minute-step="userEditClass.mstep" show-meridian="true"></div>
                </div>
              </div>

              <div class="form-group">
                <label class="control-label">Duration</label>
                <div>
                  <select name="classDuration"
      ng-options="option.name for option in userEditClass.classDuration.availableOptions track by option.id"
      ng-model="userEditClass.classDuration.selectedOption"></select>
                </div>
              </div>

              <div class="form-group">
                <button type="submit" class="btn btn-primary btn-block">Add date</button>
              </div>

            </fieldset>

          </form>

        </div>
      </div>

      <ul class="date-data list-group">
        <li class="list-group-item" ng-repeat="date in userEditClass.classData.dates">
          <strong>{{date.classDate | date: 'd MMM yyyy'}}</strong>
          <ul class="list-unstyled" ng-repeat="time in date.times">
            <li class="list-group-item">
              {{time.startTime}} - {{time.endTime}}
              <div class="italic" ng-click="userEditClass.deleteClassTime(date.classDate, time.startTime, time.endTime)">
                delete
              </div>
            </li>
          </ul>
        </li>
      </ul>

    </uib-tab>





  </uib-tabset>

</div>
